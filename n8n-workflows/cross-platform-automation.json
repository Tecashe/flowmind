{
  "name": "FlowMind - Cross-Platform Process Automation",
  "nodes": [
    {
      "parameters": {
        "triggerOn": "specificFolder",
        "folderToWatch": "{{ $env.FLOWMIND_WATCH_FOLDER }}",
        "options": {}
      },
      "id": "file-trigger",
      "name": "New File Trigger",
      "type": "n8n-nodes-base.localFileTrigger",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "jsCode": "// FlowMind Process Orchestration Logic\nconst fileData = $input.first().json;\nconst fileName = fileData.name;\nconst filePath = fileData.path;\n\n// Determine process type based on file\nlet processType = 'unknown';\nlet targetPlatforms = [];\n\nif (fileName.includes('invoice')) {\n  processType = 'invoice_processing';\n  targetPlatforms = ['salesforce', 'slack', 'asana'];\n} else if (fileName.includes('contract')) {\n  processType = 'contract_review';\n  targetPlatforms = ['slack', 'asana'];\n} else if (fileName.includes('report')) {\n  processType = 'report_distribution';\n  targetPlatforms = ['slack', 'teams'];\n}\n\n// Generate process execution plan\nconst executionPlan = {\n  processId: `proc_${Date.now()}`,\n  type: processType,\n  sourceFile: fileName,\n  platforms: targetPlatforms,\n  steps: [\n    { platform: 'slack', action: 'notify_team', priority: 1 },\n    { platform: 'asana', action: 'create_task', priority: 2 },\n    { platform: 'salesforce', action: 'update_record', priority: 3 }\n  ],\n  metadata: {\n    triggeredAt: new Date().toISOString(),\n    estimatedDuration: '5-10 minutes',\n    automationLevel: 'full'\n  }\n};\n\nreturn [{ json: executionPlan }];"
      },
      "id": "process-orchestrator",
      "name": "Process Orchestrator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "slack-condition",
              "leftValue": "={{ $json.platforms }}",
              "rightValue": "slack",
              "operator": {
                "type": "array",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "slack-router",
      "name": "Slack Router",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [650, 200]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "asana-condition",
              "leftValue": "={{ $json.platforms }}",
              "rightValue": "asana",
              "operator": {
                "type": "array",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "asana-router",
      "name": "Asana Router",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [650, 400]
    },
    {
      "parameters": {
        "channel": "automation",
        "text": "ðŸ¤– **FlowMind Automation Triggered**\n\nðŸ“ **File:** {{ $json.sourceFile }}\nðŸ”„ **Process:** {{ $json.type }}\nâ±ï¸ **Duration:** {{ $json.metadata.estimatedDuration }}\n\n**Next Steps:**\n{{ $json.steps.map(s => `${s.priority}. ${s.action} on ${s.platform}`).join('\\n') }}",
        "otherOptions": {}
      },
      "id": "slack-notification",
      "name": "Slack Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 1,
      "position": [850, 200]
    },
    {
      "parameters": {
        "resource": "task",
        "operation": "create",
        "projectId": "{{ $env.ASANA_PROJECT_ID }}",
        "name": "FlowMind: {{ $json.type }} - {{ $json.sourceFile }}",
        "otherProperties": {
          "notes": "Automated task created by FlowMind process automation.\n\nProcess Details:\n- Type: {{ $json.type }}\n- Source: {{ $json.sourceFile }}\n- Triggered: {{ $json.metadata.triggeredAt }}\n\nThis task is part of an automated workflow."
        }
      },
      "id": "asana-task",
      "name": "Create Asana Task",
      "type": "n8n-nodes-base.asana",
      "typeVersion": 1,
      "position": [850, 400]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "{{ $env.FLOWMIND_API_URL }}/api/executions/log",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "executionData",
              "value": "={{ $json }}"
            },
            {
              "name": "status",
              "value": "completed"
            },
            {
              "name": "organizationId",
              "value": "{{ $env.FLOWMIND_ORG_ID }}"
            }
          ]
        }
      },
      "id": "log-execution",
      "name": "Log to FlowMind",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1050, 300]
    }
  ],
  "connections": {
    "New File Trigger": {
      "main": [
        [
          {
            "node": "Process Orchestrator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Orchestrator": {
      "main": [
        [
          {
            "node": "Slack Router",
            "type": "main",
            "index": 0
          },
          {
            "node": "Asana Router",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack Router": {
      "main": [
        [
          {
            "node": "Slack Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Asana Router": {
      "main": [
        [
          {
            "node": "Create Asana Task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack Notification": {
      "main": [
        [
          {
            "node": "Log to FlowMind",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Asana Task": {
      "main": [
        [
          {
            "node": "Log to FlowMind",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "timezone": "America/New_York",
    "executionOrder": "v1"
  },
  "versionId": "1.0.0"
}